export const TaskManager = { queue:[], running:false, add(taskFn,name='task'){ this.queue.push({taskFn,name}); this._runNext(); }, async _runNext(){ if(this.running) return; const next=this.queue.shift(); if(!next) return; this.running=true; try{ await next.taskFn(); }catch(e){ console.error('Task error', e); } this.running=false; setTimeout(()=>this._runNext(),10); }, clear(){ this.queue=[]; } };